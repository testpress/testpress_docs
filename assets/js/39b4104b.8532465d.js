"use strict";(self.webpackChunktestpress_docs=self.webpackChunktestpress_docs||[]).push([[2695],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),d=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),c=d(n),m=r,h=c["".concat(s,".").concat(m)]||c[m]||p[m]||l;return n?a.createElement(h,o(o({ref:t},u),{},{components:n})):a.createElement(h,o({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,o=new Array(l);o[0]=c;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var d=2;d<l;d++)o[d]=n[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},3806:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>l,metadata:()=>i,toc:()=>d});var a=n(7462),r=(n(7294),n(3905));const l={sidebar_position:2},o="Exam webhook",i={unversionedId:"server-api/Integration/exam-webhook",id:"server-api/Integration/exam-webhook",title:"Exam webhook",description:"How To Enable Exam Webhook",source:"@site/docs/server-api/Integration/exam-webhook.md",sourceDirName:"server-api/Integration",slug:"/server-api/Integration/exam-webhook",permalink:"/docs/server-api/Integration/exam-webhook",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"serverAPISidebar",previous:{title:"Single Sign On (SSO)",permalink:"/docs/server-api/Integration/single-sign-on"},next:{title:"create attempt by HMAC",permalink:"/docs/server-api/Integration/create attempt by HMAC"}},s={},d=[{value:"How To Enable Exam Webhook",id:"how-to-enable-exam-webhook",level:2},{value:"Data Posted To The Exam Webhook URL",id:"data-posted-to-the-exam-webhook-url",level:2},{value:"Start Exam Webhook Response",id:"start-exam-webhook-response",level:2},{value:"End Exam Webhook Response",id:"end-exam-webhook-response",level:2},{value:"How To Generate The Hash And Verify The Authenticity Of The Data",id:"how-to-generate-the-hash-and-verify-the-authenticity-of-the-data",level:2}],u={toc:d};function p(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"exam-webhook"},"Exam webhook"),(0,r.kt)("h2",{id:"how-to-enable-exam-webhook"},"How To Enable Exam Webhook"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"In the Institute settings, locate the Exam webhook URL field and add the desired URL for the   webhook."),(0,r.kt)("li",{parentName:"ul"},"To test the webhook, use a URL generated from a webhook site like ",(0,r.kt)("a",{parentName:"li",href:"https://webhook.site/"},"Webhook site")),(0,r.kt)("li",{parentName:"ul"},"The webhook will automatically post data to the provided URL when Exam attempts are started or completed.")),(0,r.kt)("h2",{id:"data-posted-to-the-exam-webhook-url"},"Data Posted To The Exam Webhook URL"),(0,r.kt)("p",null,"Below are the response parameters posted by Testpress to Institute when an attempt is started and completed."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"email"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Email Address of the user")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"username"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Username of the user")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"attempt_id"),(0,r.kt)("td",{parentName:"tr",align:null},"integer"),(0,r.kt)("td",{parentName:"tr",align:null},"Unique Testpress Id for the Attempt. This id will be used to review the attempt")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"exam"),(0,r.kt)("td",{parentName:"tr",align:null},"key/value pair"),(0,r.kt)("td",{parentName:"tr",align:null},'This key/value pair will contain exam details like "id", "title", "start_date", "end_date", "duration".')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"total_count"),(0,r.kt)("td",{parentName:"tr",align:null},"integer"),(0,r.kt)("td",{parentName:"tr",align:null},"Total number of questions in the Exam")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"correct_answers_count"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Total number of correct answers in the attempt")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"incorrect_answers_count"),(0,r.kt)("td",{parentName:"tr",align:null},"integer"),(0,r.kt)("td",{parentName:"tr",align:null},"Total number of incorrect answers in the attempt")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"unanswered_answers_count"),(0,r.kt)("td",{parentName:"tr",align:null},"integer"),(0,r.kt)("td",{parentName:"tr",align:null},"Total number of unattemptted questions in the attempt")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"score"),(0,r.kt)("td",{parentName:"tr",align:null},"integer"),(0,r.kt)("td",{parentName:"tr",align:null},"Total score obtained by the user for the attempt")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"percentage"),(0,r.kt)("td",{parentName:"tr",align:null},"integer"),(0,r.kt)("td",{parentName:"tr",align:null},"score percentage")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"key"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Public institute key provided by Testpress to identify the Institute")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"hash"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Hash generated using above algorithm.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"subject_stats"),(0,r.kt)("td",{parentName:"tr",align:null},"key/value pair"),(0,r.kt)("td",{parentName:"tr",align:null},"This key/value pair will contain subject wise details")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"difficulty_level_stats"),(0,r.kt)("td",{parentName:"tr",align:null},"key/value pair"),(0,r.kt)("td",{parentName:"tr",align:null},"This key/value pair will contain difficulty wise details")))),(0,r.kt)("p",null,"In the above data ",(0,r.kt)("inlineCode",{parentName:"p"},"hash")," value is used to identify that the data is indeed posted from testpress."),(0,r.kt)("h2",{id:"start-exam-webhook-response"},"Start Exam Webhook Response"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "username": "test_user",\n  "accuracy": 0,\n  "hash": "8291fc65f59336716b072ae3936aeaeabbe56685e812144d87722430e80ae6c10feaf82c83dfb75ca4696e2b1f60eb72a68b376e15b3dfb5a2717d3a51973c88",\n  "exam": {\n    "id": 27,\n    "title": "File type exam",\n    "duration": null,\n    "start_date": "2023-03-15T12:04:32+05:30",\n    "end_date": null\n  },\n  "subject_stats": [],\n  "email": "karthiktest51@gmail.com",\n  "partial_correct_answers_count": null,\n  "attempt_id": 130,\n  "attempt_state": "started",\n  "incorrect_answers_count": 0,\n  "difficulty_level_stats": {},\n  "completed_on": null,\n  "unanswered_answers_count": 0,\n  "key": "YDRAXrgV3STf7EH5",\n  "attempt_start_time": "2023-03-31T10:55:54.968829Z",\n  "user_id": 2,\n  "percentage": "0.00",\n  "score": "0.00",\n  "speed": 0,\n  "institute_attempt_id": null,\n  "correct_answers_count": 0\n}\n')),(0,r.kt)("h2",{id:"end-exam-webhook-response"},"End Exam Webhook Response"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "username": "student",\n  "accuracy": 0,\n  "hash": "dc206631d1fb9a73dd1b8119b63bcfd6f2700bbd20dc6bbb7999e11f182697104cc72cb323b153ff42565481ff3d777087de7c88956c637897b43272d5b9dc9f",\n  "exam": {\n    "id": 27,\n    "title": "File type exam",\n    "duration": null,\n    "start_date": "2023-03-15T12:04:32+05:30",\n    "end_date": null\n  },\n  "subject_stats": [\n    {\n      "subject_name": "Quantitative",\n      "parent_subject_id": null,\n      "correct_answers_count": 0,\n      "incorrect_answers_count": 0,\n      "partial_correct_answers_count": 0,\n      "unanswered_count": 1,\n      "answered_count": 0,\n      "total_count": 1,\n      "score": "0.00"\n    }\n  ],\n  "email": "karthiktest51@gmail.com",\n  "partial_correct_answers_count": 0,\n  "attempt_id": 130,\n  "attempt_state": "completed",\n  "incorrect_answers_count": 0,\n  "difficulty_level_stats": {\n    "uncategorized": {\n      "correct_answers_count": 0,\n      "incorrect_answers_count": 0,\n      "partial_correct_answers_count": 0,\n      "unanswered_count": 1,\n      "total_count": 1\n    }\n  },\n  "completed_on": "2023-03-31T16:27:41.151586+05:30",\n  "unanswered_answers_count": 1,\n  "key": "YDRAXrgV3STf7EH5",\n  "attempt_start_time": "2023-03-31T10:55:54.968829Z",\n  "user_id": 2,\n  "percentage": "0.00",\n  "score": "0.00",\n  "speed": 0,\n  "institute_attempt_id": null,\n  "correct_answers_count": 0\n}\n')),(0,r.kt)("h2",{id:"how-to-generate-the-hash-and-verify-the-authenticity-of-the-data"},"How To Generate The Hash And Verify The Authenticity Of The Data"),(0,r.kt)("p",null,"HMAC (Hash-based message authentication code) is used to avoid tampering during the request flow.\nThe hash is calculated using the following algorithm:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Get the values of 'public_key', 'attempt_id', 'correct_answers_count', 'private_key', 'incorrct_answers_count', 'unanswered_count', 'percentage', 'score', 'user_id'"),(0,r.kt)("li",{parentName:"ul"},"Create a string by appending the above percentage encoded values using | pipe character. Maintain the same order while appending"),(0,r.kt)("li",{parentName:"ul"},"Calculate the HMAC using HMAC-SHA512 with the private key."),(0,r.kt)("li",{parentName:"ul"},"Private key can be taken from the admin dashboard.\nhmac.new(secret, message, hashlib.sha512).hexdigest()")))}p.isMDXComponent=!0}}]);