"use strict";(self.webpackChunktestpress_docs=self.webpackChunktestpress_docs||[]).push([[3307],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var d=a.createContext({}),s=function(e){var t=a.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=s(e.components);return a.createElement(d.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,d=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=s(n),m=r,h=u["".concat(d,".").concat(m)]||u[m]||p[m]||o;return n?a.createElement(h,i(i({ref:t},c),{},{components:n})):a.createElement(h,i({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=u;var l={};for(var d in t)hasOwnProperty.call(t,d)&&(l[d]=t[d]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var s=2;s<o;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},325:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var a=n(7462),r=(n(7294),n(3905));const o={sidebar_position:3},i="Chapter content attempt webhook",l={unversionedId:"server-api/Integration/chapter-content-attempt-webhook",id:"server-api/Integration/chapter-content-attempt-webhook",title:"Chapter content attempt webhook",description:"How to enable the chapter content attempt webhook",source:"@site/docs/server-api/Integration/chapter-content-attempt-webhook.md",sourceDirName:"server-api/Integration",slug:"/server-api/Integration/chapter-content-attempt-webhook",permalink:"/docs/server-api/Integration/chapter-content-attempt-webhook",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"serverAPISidebar",previous:{title:"Exam webhook",permalink:"/docs/server-api/Integration/exam-webhook"},next:{title:"create attempt by HMAC",permalink:"/docs/server-api/Integration/create attempt by HMAC"}},d={},s=[{value:"How to enable the chapter content attempt webhook",id:"how-to-enable-the-chapter-content-attempt-webhook",level:2},{value:"Data posted to the webhook URL",id:"data-posted-to-the-webhook-url",level:2},{value:"Sample webhook payload",id:"sample-webhook-payload",level:2},{value:"For Notes",id:"for-notes",level:4},{value:"For Attachments",id:"for-attachments",level:4},{value:"For Exam",id:"for-exam",level:4},{value:"For Video",id:"for-video",level:4},{value:"For VideoConference",id:"for-videoconference",level:4},{value:"For LiveStream",id:"for-livestream",level:4},{value:"How To Generate The Hash And Verify The Authenticity Of The Data",id:"how-to-generate-the-hash-and-verify-the-authenticity-of-the-data",level:2}],c={toc:s};function p(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"chapter-content-attempt-webhook"},"Chapter content attempt webhook"),(0,r.kt)("h2",{id:"how-to-enable-the-chapter-content-attempt-webhook"},"How to enable the chapter content attempt webhook"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"In the Institute settings, locate the ",(0,r.kt)("strong",{parentName:"li"},"Chapter content webhook URL")," field and add the desired destination URL."),(0,r.kt)("li",{parentName:"ul"},"Use a URL generated from a webhook tester such as ",(0,r.kt)("a",{parentName:"li",href:"https://webhook.site/"},"Webhook site")," if you want to validate payloads before going live."),(0,r.kt)("li",{parentName:"ul"},"Testpress automatically posts data to this URL whenever a learner starts or completes a chapter content attempt.")),(0,r.kt)("h2",{id:"data-posted-to-the-webhook-url"},"Data posted to the webhook URL"),(0,r.kt)("p",null,"Below are the response parameters Testpress sends when a chapter content attempt transitions to a new state."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"attempt_id"),(0,r.kt)("td",{parentName:"tr",align:null},"integer"),(0,r.kt)("td",{parentName:"tr",align:null},"Unique Testpress ID for the chapter content attempt.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"user_id"),(0,r.kt)("td",{parentName:"tr",align:null},"integer"),(0,r.kt)("td",{parentName:"tr",align:null},"Identifier of the learner who is attempting the chapter content.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"chapter_content"),(0,r.kt)("td",{parentName:"tr",align:null},"key/value pair"),(0,r.kt)("td",{parentName:"tr",align:null},"Contains chapter content details such as ",(0,r.kt)("inlineCode",{parentName:"td"},"id"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"title"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"content_type"),", and nested ",(0,r.kt)("inlineCode",{parentName:"td"},"exam")," info.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"course"),(0,r.kt)("td",{parentName:"tr",align:null},"key/value pair"),(0,r.kt)("td",{parentName:"tr",align:null},"Provides course metadata (for example ",(0,r.kt)("inlineCode",{parentName:"td"},"id")," and ",(0,r.kt)("inlineCode",{parentName:"td"},"title"),").")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"assessment"),(0,r.kt)("td",{parentName:"tr",align:null},"key/value pair"),(0,r.kt)("td",{parentName:"tr",align:null},"Populated when the attempt is for an exam; ",(0,r.kt)("inlineCode",{parentName:"td"},"null")," when not applicable.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"user_video"),(0,r.kt)("td",{parentName:"tr",align:null},"key/value pair"),(0,r.kt)("td",{parentName:"tr",align:null},"Details about the learner\u2019s video watch progress, if available.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"user_video_conference"),(0,r.kt)("td",{parentName:"tr",align:null},"key/value pair"),(0,r.kt)("td",{parentName:"tr",align:null},"Data about the video conference attempt, if available.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"state"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Current state of the attempt (e.g. ",(0,r.kt)("inlineCode",{parentName:"td"},"Started"),",  ",(0,r.kt)("inlineCode",{parentName:"td"},"Pending Evaluation"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"Evaluation Completed"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"Completed"),").")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"created"),(0,r.kt)("td",{parentName:"tr",align:null},"datetime"),(0,r.kt)("td",{parentName:"tr",align:null},"ISO-8601 timestamp indicating when the attempt record was created.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"completed_on"),(0,r.kt)("td",{parentName:"tr",align:null},"datetime"),(0,r.kt)("td",{parentName:"tr",align:null},"ISO-8601 timestamp showing when the attempt was completed; ",(0,r.kt)("inlineCode",{parentName:"td"},"null")," while in progress.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"key"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Public institute key provided by Testpress to identify the Institute.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"hash"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"HMAC signature that can be used to verify the authenticity of the payload.")))),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"hash")," is used to verify that the data originated from Testpress."),(0,r.kt)("h2",{id:"sample-webhook-payload"},"Sample webhook payload"),(0,r.kt)("h4",{id:"for-notes"},"For Notes"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "attempt_id": 255920,\n  "user_id": 2,\n  "chapter_content": {\n    "id": 248,\n    "title": "Arithmetic Operators in Python",\n    "content_type": "Notes",\n    "exam": null\n  },\n  "course": {\n    "id": 1,\n    "title": "Computer Science"\n  },\n  "assessment": null,\n  "user_video": null,\n  "user_video_conference": null,\n  "state": "Completed",\n  "created": "2025-11-14T16:18:51.254316+05:30",\n  "completed_on": "2025-11-14T16:18:51.253655+05:30",\n  "key": "rBGZys6baejzNDkn",\n  "hash": "b8c8ae7442c0d13db532401e8ab0ac48857b47201eb7a2b8ed7d1dcc54ca44972db23a2188b1f43f9abc215e32f1825fa1b22d448ce6633cc5230d4595ef4f82"\n}\n')),(0,r.kt)("h4",{id:"for-attachments"},"For Attachments"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "attempt_id": 100419,\n  "user_id": 3,\n  "chapter_content": {\n    "id": 8357,\n    "title": "Financial Leverage Practice",\n    "content_type": "Attachment",\n    "exam": null\n  },\n  "course": {\n    "id": 726,\n    "title": "# Demo Course"\n  },\n  "assessment": null,\n  "user_video": null,\n  "user_video_conference": null,\n  "state": "Completed",\n  "created": "2025-11-17T12:59:25.213511+05:30",\n  "completed_on": "2025-11-17T12:59:25.213284+05:30",\n  "key": "wCubPULcrB38SM5d",\n  "hash": "f12bbef95f7563b3bd4b6cb2efade4163ccd6f2026e3ff3380214bf00f05a421ce93aeb063be13cad9ea3ff9f5067c4924ac4bdb8d568cedc9d2828d436bbff2"\n}\n')),(0,r.kt)("h4",{id:"for-exam"},"For Exam"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "attempt_id": 100418,\n  "user_id": 3,\n  "chapter_content": {\n    "id": 8298,\n    "title": "Monthly Test 3",\n    "content_type": "Exam",\n    "exam": {\n      "id": 2628,\n      "title": "Monthly Test 3",\n      "start_date": "2025-10-27T15:55:46.356357+05:30",\n      "end_date": null,\n      "duration": "0:05:00"\n    }\n  },\n  "course": {\n    "id": 1242,\n    "title": "Science"\n  },\n  "assessment": {\n    "id": 90722,\n    "exam_id": 2628,\n    "user_id": 3,\n    "total_score": 80,\n    "number_of_correct_answers": 0,\n    "number_of_incorrect_answers": 0,\n    "number_of_unanswered_questions": 0,\n    "number_of_answered_questions": 0,\n    "percentage": "0.00",\n    "rank": "NA",\n    "result": "NA",\n    "total_questions": 20\n  },\n  "user_video": null,\n  "user_video_conference": null,\n  "state": "Started",\n  "created": "2025-11-17T12:55:01.130232+05:30",\n  "completed_on": null,\n  "key": "wCubPULcrB38SM5d",\n  "hash": "de7d7eedd904c3bf03558c4a425d15a8a053d1d11f7def46c0a448271266d1e7852ee184bb19f4d73946018a8731777821eae058b85fd36b5391925e72c5bbac"\n}\n')),(0,r.kt)("h4",{id:"for-video"},"For Video"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "attempt_id": 100421,\n  "user_id": 3,\n  "chapter_content": {\n    "id": 7859,\n    "title": "Chauffers Communication",\n    "content_type": "Video",\n    "exam": null\n  },\n  "course": {\n    "id": 726,\n    "title": "# Test Course"\n  },\n  "assessment": null,\n  "user_video": {\n    "id": 5390,\n    "video_id": 2648,\n    "created": "2025-11-17T12:59:57.493704+05:30",\n    "watched_percentage": 0,\n    "remaining_duration": "593.0",\n    "state": "Started",\n    "is_live_class_recording": false\n  },\n  "user_video_conference": null,\n  "state": "Started",\n  "created": "2025-11-17T12:59:57.497059+05:30",\n  "completed_on": null,\n  "key": "wCubPULcrB38SM5d",\n  "hash": "a765d8001d4770d0c3f73772377c78399abadde776779fdc270c44e2c3be9b65d3d67baac99b18db9a43d685b525c5e8213dffb529df96605543ef41e3557e41"\n}\n')),(0,r.kt)("h4",{id:"for-videoconference"},"For VideoConference"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "attempt_id": 100426,\n  "user_id": 3,\n  "chapter_content": {\n    "id": 5662,\n    "title": "NM Testing 25-7-24",\n    "content_type": "VideoConference",\n    "exam": null\n  },\n  "course": {\n    "id": 492,\n    "title": "Science Class 4 - Logistics"\n  },\n  "assessment": null,\n  "user_video": {\n    "id": 5392,\n    "video_id": 1796,\n    "created": "2025-11-17T13:55:38.022375+05:30",\n    "watched_percentage": 100,\n    "remaining_duration": "0.0",\n    "state": "Completed",\n    "is_live_class_recording": true\n  },\n  "user_video_conference": null,\n  "state": "Completed",\n  "created": "2025-11-17T13:55:38.024655+05:30",\n  "completed_on": "2025-11-17T13:55:41.442138+05:30",\n  "key": "wCubPULcrB38SM5d",\n  "hash": "fd12fe502d962504c9e7d966ef1f7dfaa2060e35578361b2350d7dc5ddb30fb2581eee8ae5fc9c83380d7a23e007a30bc4f988442894b3ddf28a89ee08b8e851"\n}\n')),(0,r.kt)("h4",{id:"for-livestream"},"For LiveStream"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "attempt_id": 100422,\n  "user_id": 3,\n  "chapter_content": {\n    "id": 7920,\n    "title": "live stream title",\n    "content_type": "Live Stream",\n    "exam": null\n  },\n  "course": {\n    "id": 726,\n    "title": "# Test Course"\n  },\n  "assessment": null,\n  "user_video": {\n    "id": 5391,\n    "video_id": 2658,\n    "created": "2025-11-17T13:01:46.730544+05:30",\n    "watched_percentage": 0,\n    "remaining_duration": null,\n    "state": "Started",\n    "is_live_class_recording": false\n  },\n  "user_video_conference": null,\n  "state": "Started",\n  "created": "2025-11-17T13:01:46.733354+05:30",\n  "completed_on": null,\n  "key": "wCubPULcrB38SM5d",\n  "hash": "01d6d0c2cb574b52620f4659d0428da96b41a4be35a4bec65a4b4b5706bed9ef2b277b41522c5c2c579146af7da92af9757966062cdd1cc46dab1e212307e691"\n}\n')),(0,r.kt)("h2",{id:"how-to-generate-the-hash-and-verify-the-authenticity-of-the-data"},"How To Generate The Hash And Verify The Authenticity Of The Data"),(0,r.kt)("p",null,"HMAC (Hash-based message authentication code) is used to avoid tampering during the request flow.\nThe hash is calculated using the following algorithm:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Get the values of ",(0,r.kt)("inlineCode",{parentName:"li"},"public_key"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"attempt_id"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"chapter_content.id"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"user_id"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"course.id"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"private_key"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"status"),"."),(0,r.kt)("li",{parentName:"ul"},"Create a string by appending the above percentage encoded values using | pipe character. Maintain the same order while appending"),(0,r.kt)("li",{parentName:"ul"},"Calculate the HMAC using HMAC-SHA512 with the private key."),(0,r.kt)("li",{parentName:"ul"},"Private key can be taken from the admin dashboard.\nhmac.new(secret, message, hashlib.sha512).hexdigest()")))}p.isMDXComponent=!0}}]);